<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>跳转中</title>
    <style>
        body {
            background: #EEE;
            padding: 0;
            margin: 0;
        }

        .IFrame {
            width: 400px;
            height: 1920px;
            max-height: 100vh;
            margin: auto;
            margin-top: 4vh;
            background-color: #FFF;
            border: none;
            overflow: hidden;
            box-shadow: 6px 6px 16px 2px #464646;
        }
    </style>
    <script>
        function redirectToUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const tValue = urlParams.get('t');

            if (tValue) {
                const jsonUrl = 'https://t.kbilibili.com/t.json';

                fetch(jsonUrl)
                    .then(response => response.json())
                    .then(jsonData => {

                        const targetUrl = jsonData[tValue];

                        if (targetUrl) {
                            // 获取 iframe 元素
                            const iframe = document.querySelector('.IFrame');
                            if (iframe) {
                                // 设置 iframe 的 src 属性为目标链接
                                iframe.src = targetUrl;
                            } else {
                                console.error('找不到 iframe 元素');
                            }
                        } else {
                            console.error('找不到对应的链接');
                        }
                    })
                    .catch(error => console.error('获取 JSON 数据失败', error));
            } else {
                console.error('缺少 t 值');
            }
        }

        document.addEventListener('DOMContentLoaded', redirectToUrl);
    </script>
</head>

<body style="text-align: center">
    <iframe class="IFrame"></iframe>
</body>

</html>
